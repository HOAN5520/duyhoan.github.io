<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" type="image/png" href="/img/logo.jpg">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <!-- APlayer CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.css" />
    <link rel="stylesheet" href="./1.css">
    <title>duydomi</title>
</head>

<body>
    <div class="main">
        <div class="menu">
        </div>
        <a href="/index.html">
            <img src="/img/logo copy.jpg" alt="" class="logo">
        </a>
        <a href="./musi.html" class="large">TRANG CHỦ</a>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h3>New Releasess</h3>
                </div>
                <div class="col-md-3">
                    <a href="javascript:void();" class="album-poster" data-switch="0">
                        <img class="image1" src="https://lh3.googleusercontent.com/proxy/tH0Wg2CboNSoc8xTLwDJ3IqIPr0lsMJe4K0basmTb2Hs8539doI5PaoFFk1Pyc_RbX9IfSoofs-ig-rBYo_W_wlxEuPVGuPhI3tTS-lCqK0z5L9ghsFN3TgJaW4RIuvjyIYU" alt="">
                        <img class="image2" src="/img/v02-512.png" alt="">
                    </a>
                    <h4>Muộn rồi mà sao còn</h4>
                    <p>xuất bản - 2021</p>
                </div>
                <div class="col-md-3">
                    <a href="#" class="album-poster" data-switch="1">
                        <img class="image1" src="https://images.pexels.com/photos/1370545/pexels-photo-1370545.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500" alt="">
                        <img class="image2" src="/img/v02-512.png" alt="">
                    </a>
                    <h4>Repellat illo</h4>
                    <p>Lorem ipsum dolor sit ame - 2020</p>
                </div>
                <div class="col-md-3">
                    <a href="#" class="album-poster" data-switch="2">
                        <img class="image1" src="https://images.pexels.com/photos/838696/pexels-photo-838696.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500" alt="">
                        <img class="image2" src="/img/v02-512.png" alt="">
                    </a>
                    <h4>adipisicing elit</h4>
                    <p>Porro distinctio fuga - 2020</p>
                </div>

                <div class="col-md-3">
                    <a href="#" class="album-poster" data-switch="3">
                        <img class="image1" src="https://images.pexels.com/photos/1047442/pexels-photo-1047442.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500" alt="">
                        <img class="image2" src="/img/v02-512.png" alt="">
                    </a>
                    <h4>Atque ab</h4>
                    <p>Harum nam unde digniss - 2020</p>
                </div>
                <div class="col-md-3">
                    <a href="#" class="album-poster" data-switch="4">
                        <img class="image1" src="https://images.pexels.com/photos/1190298/pexels-photo-1190298.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500" alt="">
                        <img class="image2" src="/img/v02-512.png" alt="">
                    </a>
                    <h4>praesentium fugiat</h4>
                    <p>Lorem ipsum dolor - 2020</p>
                </div>
                <div class="col-md-3">
                    <a href="#" class="album-poster" data-switch="5">
                        <img class="image1" src="https://images.pexels.com/photos/210922/pexels-photo-210922.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500" alt="">
                        <img class="image2" src="/img/v02-512.png" alt="">
                    </a>
                    <h4>veniam expedita</h4>
                    <p>Porro distinctio fuga - 2020</p>
                </div>
                <div class="col-md-3">
                    <a href="#" class="album-poster" data-switch="6">
                        <img class="image1" src="https://images.pexels.com/photos/1763075/pexels-photo-1763075.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500" alt="">
                        <img class="image2" src="/img/v02-512.png" alt="">
                    </a>
                    <h4>Lorem ipsum</h4>
                    <p>Lorem ipsum - 2010</p>
                </div>
                <div class="col-md-3">
                    <a href="#" class="album-poster">
                        <img class="image1" src="https://images.pexels.com/photos/1370545/pexels-photo-1370545.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500" alt="">
                        <img class="image2" src="/img/v02-512.png" alt="">
                    </a>
                    <h4>Repellat illo</h4>
                    <p>Lorem ipsum dolor sit ame - 2020</p>
                </div>

                <div id="aplayer"></div>

                <!-- Jquery Link -->
                <script src="/source/slim.min.js"></script>
                <!-- Bootstrap Link -->
                <script src="./hl.js"></script>
                <!-- APlayer Jquery link -->
                <script src="./aplay.js"></script>
                <script>
                    // NOW I CLICK album-poster TO GET CURRENT SONG ID
                    $(".album-poster").on('click', function und(b) {
                        var dataSwitchId = $(this).attr('data-switch');
                        //console.log(dataSwitchId);

                        // and now i use aplayer switch function see
                        ap.list.switch(0); //this is static id but i use dynamic 

                        // aplayer play function
                        // when i click any song to play
                        ap.play();

                        // click to slideUp player see
                        $("#aplayer").addClass('showPlayer');
                    });

                    const ap = new APlayer({
                        container: document.getElementById('aplayer'),
                        theme: '#e9e9e9',
                        audio: [{
                            name: '',
                            artist: '',
                            url: 'source/chill/.mp3',
                            cover: ''
                        }, {
                            name: '',
                            artist: '',
                            url: 'source/chill/.mp3',
                            cover: ''
                        }, {
                            name: '',
                            artist: '',
                            url: 'source/chill/.mp3',
                            cover: ''
                        }, {
                            name: '',
                            artist: '',
                            url: 'source/chill/.mp3',
                            cover: ''
                        }, {
                            name: '',
                            artist: '',
                            url: 'source/chill/.mp3',
                            cover: ''
                        }, {
                            name: '',
                            artist: '',
                            url: 'source/chill/.mp3',
                            cover: ''
                        }, {
                            name: '',
                            artist: '',
                            url: 'source/chill/.mp3',
                            cover: ''
                        }, {
                            name: '',
                            artist: '',
                            url: 'source/chill/.mp3',
                            cover: ''
                        }, {
                            name: '',
                            artist: '',
                            url: 'source/chill/.mp3',
                            cover: ''
                        }, {
                            name: '',
                            artist: '',
                            url: 'source/chill/.mp3',
                            cover: ''
                        }, {
                            name: '',
                            artist: '',
                            url: 'source/chill/.mp3',
                            cover: ''
                        }, {
                            name: '',
                            artist: '',
                            url: 'source/chill/.mp3',
                            cover: ''
                        }, {
                            name: '',
                            artist: '',
                            url: 'source/chill/.mp3',
                            cover: ''
                        }, {
                            name: '',
                            artist: '',
                            url: 'source/chill/.mp3',
                            cover: ''
                        }, {
                            name: '',
                            artist: '',
                            url: 'source/chill/.mp3',
                            cover: ''
                        }, {
                            name: '',
                            artist: '',
                            url: 'source/chill/.mp3',
                            cover: ''
                        }, {
                            name: '',
                            artist: '',
                            url: 'source/chill/.mp3',
                            cover: ''
                        }, {
                            name: '',
                            artist: '',
                            url: 'source/chill/.mp3',
                            cover: ''
                        }, {
                            name: '',
                            artist: '',
                            url: 'source/chill/.mp3',
                            cover: ''
                        }, {
                            name: '',
                            artist: '',
                            url: 'source/chill/.mp3',
                            cover: ''
                        }, {
                            name: '',
                            artist: '',
                            url: 'source/chill/.mp3',
                            cover: ''
                        }, {
                            name: '',
                            artist: '',
                            url: 'source/chill/.mp3',
                            cover: ''
                        }, {}]
                    });

                    const colorThief = new ColorThief();
                    const image = new Image();
                    const xhr = new XMLHttpRequest();
                    const setTheme = (index) => {
                        if (!ap.list.audios[index].theme) {
                            xhr.onload = function() {
                                let coverUrl = URL.createObjectURL(this.response);
                                image.onload = function() {
                                    let color = colorThief.getColor(image);
                                    ap.theme(`rgb(${color[0]}, ${color[1]}, ${color[2]})`, index);
                                    URL.revokeObjectURL(coverUrl)
                                };
                                image.src = coverUrl;
                            }
                            xhr.open('GET', ap.list.audios[index].cover, true);
                            xhr.responseType = 'blob';
                            xhr.send();
                        }
                    };
                    setTheme(ap.list.index);
                    ap.on('listswitch', (index) => {
                        setTheme(index);
                    });
                </script>
</body>

</html>